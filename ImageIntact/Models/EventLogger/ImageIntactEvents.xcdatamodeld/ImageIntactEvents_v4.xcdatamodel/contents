<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<model type="com.apple.IDECoreDataModeler.DataModel" documentVersion="1.0" lastSavedToolsVersion="23788.4" systemVersion="24G90" minimumToolsVersion="Automatic" sourceLanguage="Swift" usedWithSwiftData="YES" userDefinedModelVersionIdentifier="">
    <entity name="BackupEvent" representedClassName="BackupEvent" syncable="YES" codeGenerationType="class">
        <attribute name="checksum" optional="YES" attributeType="String"/>
        <attribute name="destinationPath" optional="YES" attributeType="String"/>
        <attribute name="driveUUID" optional="YES" attributeType="String"/>
        <attribute name="durationMs" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="errorMessage" optional="YES" attributeType="String"/>
        <attribute name="eventType" attributeType="String"/>
        <attribute name="fileName" optional="YES" attributeType="String"/>
        <attribute name="filePath" optional="YES" attributeType="String"/>
        <attribute name="fileSize" optional="YES" attributeType="Integer 64" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="metadata" optional="YES" attributeType="Binary"/>
        <attribute name="severity" attributeType="String" defaultValueString="info"/>
        <attribute name="timestamp" attributeType="Date" usesScalarValueType="NO"/>
        <relationship name="session" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="BackupSession" inverseName="events" inverseEntity="BackupSession"/>
        <fetchIndex name="checksumDriveIndex">
            <fetchIndexElement property="checksum" type="Binary" order="ascending"/>
            <fetchIndexElement property="driveUUID" type="Binary" order="ascending"/>
        </fetchIndex>
        <fetchIndex name="eventTypeIndex">
            <fetchIndexElement property="eventType" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>
    <entity name="BackupSession" representedClassName="BackupSession" syncable="YES" codeGenerationType="class">
        <attribute name="completedAt" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="fileCount" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="sourceURL" attributeType="String"/>
        <attribute name="startedAt" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="status" attributeType="String" defaultValueString="running"/>
        <attribute name="toolVersion" optional="YES" attributeType="String"/>
        <attribute name="totalBytes" optional="YES" attributeType="Integer 64" defaultValueString="0" usesScalarValueType="YES"/>
        <relationship name="drive" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="DriveIdentity" inverseName="backupSessions" inverseEntity="DriveIdentity"/>
        <relationship name="events" optional="YES" toMany="YES" deletionRule="Cascade" destinationEntity="BackupEvent" inverseName="session" inverseEntity="BackupEvent"/>
    </entity>
    <entity name="DriveIdentity" representedClassName="DriveIdentity" syncable="YES" codeGenerationType="class">
        <attribute name="autoStartBackup" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="capacity" optional="YES" attributeType="Integer 64" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="colorHex" optional="YES" attributeType="String"/>
        <attribute name="deviceModel" optional="YES" attributeType="String"/>
        <attribute name="emoji" optional="YES" attributeType="String"/>
        <attribute name="firstSeen" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="hardwareSerial" optional="YES" attributeType="String"/>
        <attribute name="healthStatus" optional="YES" attributeType="String"/>
        <attribute name="id" optional="YES" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="isPreferredBackup" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="lastHealthCheck" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="lastPortInfo" optional="YES" attributeType="String"/>
        <attribute name="lastSeen" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="notes" optional="YES" attributeType="String"/>
        <attribute name="physicalLocation" optional="YES" attributeType="String"/>
        <attribute name="totalBackups" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="totalBytesWritten" optional="YES" attributeType="Integer 64" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="userLabel" optional="YES" attributeType="String"/>
        <attribute name="volumeUUID" optional="YES" attributeType="String"/>
        <relationship name="backupSessions" optional="YES" toMany="YES" deletionRule="Nullify" destinationEntity="BackupSession" inverseName="drive" inverseEntity="BackupSession"/>
        <relationship name="sourceDestinationMappings" optional="YES" toMany="YES" deletionRule="Cascade" destinationEntity="SourceDestinationMapping" inverseName="drive" inverseEntity="SourceDestinationMapping"/>
    </entity>
    <entity name="SourceDestinationMapping" representedClassName="SourceDestinationMapping" syncable="YES" codeGenerationType="class">
        <attribute name="createdAt" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="destinationOrganizationName" optional="YES" attributeType="String"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="lastUsed" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="sourcePath" attributeType="String"/>
        <attribute name="useCount" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <relationship name="drive" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="DriveIdentity" inverseName="sourceDestinationMappings" inverseEntity="DriveIdentity"/>
        <fetchIndex name="sourcePathIndex">
            <fetchIndexElement property="sourcePath" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>

    <!-- Vision Framework Entities -->
    <entity name="ImageMetadata" representedClassName="ImageMetadata" syncable="YES" codeGenerationType="class">
        <attribute name="analysisDate" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="analysisVersion" attributeType="String" defaultValueString="1.0"/>
        <attribute name="checksum" attributeType="String"/>
        <attribute name="colorProfile" optional="YES" attributeType="String"/>
        <attribute name="dominantColors" optional="YES" attributeType="Transformable" valueTransformerName="NSSecureUnarchiveFromDataTransformer" customClassName="[String]"/>
        <attribute name="faceCount" optional="YES" attributeType="Integer 16" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="filePath" attributeType="String"/>
        <attribute name="hasText" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="imageHeight" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="imageWidth" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="originalHeight" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="originalWidth" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="textRegions" optional="YES" attributeType="Transformable" valueTransformerName="NSSecureUnarchiveFromDataTransformer" customClassName="[[String:Any]]"/>
        <attribute name="driveUUID" optional="YES" attributeType="String"/>
        <attribute name="volumeName" optional="YES" attributeType="String"/>
        <relationship name="detectedObjects" optional="YES" toMany="YES" deletionRule="Cascade" destinationEntity="DetectedObject" inverseName="imageMetadata" inverseEntity="DetectedObject"/>
        <relationship name="exifData" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ExifData" inverseName="imageMetadata" inverseEntity="ExifData"/>
        <relationship name="faceRectangles" optional="YES" toMany="YES" deletionRule="Cascade" destinationEntity="FaceRectangle" inverseName="imageMetadata" inverseEntity="FaceRectangle"/>
        <relationship name="sceneClassifications" optional="YES" toMany="YES" deletionRule="Cascade" destinationEntity="SceneClassification" inverseName="imageMetadata" inverseEntity="SceneClassification"/>
        <relationship name="colorAnalysis" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ImageColorAnalysis" inverseName="imageMetadata" inverseEntity="ImageColorAnalysis"/>
        <relationship name="qualityMetrics" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ImageQualityMetrics" inverseName="imageMetadata" inverseEntity="ImageQualityMetrics"/>
        <relationship name="histogram" optional="YES" maxCount="1" deletionRule="Cascade" destinationEntity="ImageHistogram" inverseName="imageMetadata" inverseEntity="ImageHistogram"/>
        <fetchIndex name="checksumIndex">
            <fetchIndexElement property="checksum" type="Binary" order="ascending"/>
        </fetchIndex>
        <fetchIndex name="filePathIndex">
            <fetchIndexElement property="filePath" type="Binary" order="ascending"/>
        </fetchIndex>
        <fetchIndex name="driveUUIDIndex">
            <fetchIndexElement property="driveUUID" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>

    <entity name="DetectedObject" representedClassName="DetectedObject" syncable="YES" codeGenerationType="class">
        <attribute name="boundingBox" optional="YES" attributeType="String"/>
        <attribute name="confidence" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="identifier" attributeType="String"/>
        <attribute name="label" attributeType="String"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="detectedObjects" inverseEntity="ImageMetadata"/>
        <fetchIndex name="confidenceIndex">
            <fetchIndexElement property="confidence" type="Binary" order="descending"/>
        </fetchIndex>
        <fetchIndex name="labelIndex">
            <fetchIndexElement property="label" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>

    <entity name="SceneClassification" representedClassName="SceneClassification" syncable="YES" codeGenerationType="class">
        <attribute name="confidence" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="identifier" attributeType="String"/>
        <attribute name="label" attributeType="String"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="sceneClassifications" inverseEntity="ImageMetadata"/>
        <fetchIndex name="confidenceIndex">
            <fetchIndexElement property="confidence" type="Binary" order="descending"/>
        </fetchIndex>
        <fetchIndex name="labelIndex">
            <fetchIndexElement property="label" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>

    <entity name="FaceRectangle" representedClassName="FaceRectangle" syncable="YES" codeGenerationType="class">
        <attribute name="boundingBox" attributeType="String"/>
        <attribute name="confidence" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="eyesOpen" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="rollAngle" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="smiling" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="yawAngle" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="faceRectangles" inverseEntity="ImageMetadata"/>
    </entity>

    <entity name="ExifData" representedClassName="ExifData" syncable="YES" codeGenerationType="class">
        <attribute name="aperture" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="cameraModel" optional="YES" attributeType="String"/>
        <attribute name="dateTaken" optional="YES" attributeType="Date" usesScalarValueType="NO"/>
        <attribute name="exposureTime" optional="YES" attributeType="String"/>
        <attribute name="focalLength" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="iso" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="latitude" optional="YES" attributeType="Double" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="lens" optional="YES" attributeType="String"/>
        <attribute name="longitude" optional="YES" attributeType="Double" defaultValueString="0.0" usesScalarValueType="YES"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="exifData" inverseEntity="ImageMetadata"/>
        <fetchIndex name="dateTakenIndex">
            <fetchIndexElement property="dateTaken" type="Binary" order="ascending"/>
        </fetchIndex>
    </entity>

    <!-- Core Image Analysis Entities -->
    <entity name="ImageColorAnalysis" representedClassName="ImageColorAnalysis" syncable="YES" codeGenerationType="class">
        <attribute name="averageHue" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="averageSaturation" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="averageBrightness" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="colorPalette" optional="YES" attributeType="Transformable" valueTransformerName="NSSecureUnarchiveFromDataTransformer" customClassName="[String]"/>
        <attribute name="dominantColorHex" optional="YES" attributeType="String"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="isMonochrome" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="colorTemperature" optional="YES" attributeType="Integer 32" defaultValueString="0" usesScalarValueType="YES"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="colorAnalysis" inverseEntity="ImageMetadata"/>
    </entity>

    <entity name="ImageQualityMetrics" representedClassName="ImageQualityMetrics" syncable="YES" codeGenerationType="class">
        <attribute name="blurScore" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="sharpnessScore" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="noiseLevel" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="contrastRatio" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="exposureValue" optional="YES" attributeType="Float" defaultValueString="0.0" usesScalarValueType="YES"/>
        <attribute name="highlightsClipped" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="shadowsClipped" optional="YES" attributeType="Boolean" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <attribute name="overallQuality" optional="YES" attributeType="String"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="qualityMetrics" inverseEntity="ImageMetadata"/>
    </entity>

    <entity name="ImageHistogram" representedClassName="ImageHistogram" syncable="YES" codeGenerationType="class">
        <attribute name="redChannel" optional="YES" attributeType="Binary"/>
        <attribute name="greenChannel" optional="YES" attributeType="Binary"/>
        <attribute name="blueChannel" optional="YES" attributeType="Binary"/>
        <attribute name="luminanceChannel" optional="YES" attributeType="Binary"/>
        <attribute name="peakRed" optional="YES" attributeType="Integer 16" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="peakGreen" optional="YES" attributeType="Integer 16" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="peakBlue" optional="YES" attributeType="Integer 16" defaultValueString="0" usesScalarValueType="YES"/>
        <attribute name="id" attributeType="UUID" usesScalarValueType="NO"/>
        <relationship name="imageMetadata" optional="YES" maxCount="1" deletionRule="Nullify" destinationEntity="ImageMetadata" inverseName="histogram" inverseEntity="ImageMetadata"/>
    </entity>
</model>